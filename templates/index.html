<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>éšæœºåˆ†ç»„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-center">éšæœºåˆ†ç»„ç³»ç»Ÿ</h2>

    <div class="alert alert-info">
        <h5>ä½¿ç”¨è¯´æ˜ ğŸ“Œ</h5>
        <ul>
            <li>è¯·ä¸€æ¬¡æ€§è¾“å…¥æ‰€æœ‰éœ€è¦åˆ†ç»„çš„åå­—ï¼Œä½¿ç”¨ <strong>é€—å·ï¼ˆ,ï¼‰</strong> åˆ†éš”ã€‚</li>
            <li>æ¯ä¸ªäººä¼šæŠ•æ· <strong>30 æ¬¡éª°å­</strong>ï¼Œè®¡ç®—å¹³å‡å€¼åè¿›è¡Œæ’åºã€‚</li>
            <li>æŒ‰å¹³å‡å€¼ä»å°åˆ°å¤§æ’åºåï¼Œ<strong>ä¸¤äººä¸€ç»„</strong> è¿›è¡Œåˆ†ç»„ï¼ˆå¦‚æœäººæ•°ä¸ºå¥‡æ•°ï¼Œæœ€åä¸€ç»„å¯èƒ½æœ‰ 3 äººï¼‰ã€‚</li>
            <li>ç³»ç»Ÿæ¯å‘¨ <strong>ä»…å…è®¸è¿è¡Œä¸€æ¬¡</strong>ï¼Œä¸‹ä¸€æ¬¡å°†åœ¨ <strong>7å¤©</strong> åè§£é”ã€‚</li>
            <li>æ‰€æœ‰æŠ•æ·è®°å½•é€æ˜å¯è§ï¼Œç¡®ä¿å…¬å¹³ã€‚</li>
        </ul>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    {% if not can_generate %}
    <div class="alert alert-warning text-center">
        âš ï¸ è¯·ç­‰å¾… <strong>{{ cooldown_remaining }}</strong> åå†è¿è¡Œï¼
    </div>
    {% endif %}

    <form method="POST" class="mt-3">
        <div class="mb-3">
            <label for="names" class="form-label"><strong>è¾“å…¥åå­—ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼š</strong></label>
            <input type="text" class="form-control" id="names" name="names" placeholder="ä¾‹å¦‚ï¼šYitian, Jingshu, Zicheng" required>
        </div>
        <button type="submit" class="btn btn-primary" {% if not can_generate %}disabled{% endif %}>ç”Ÿæˆåˆ†ç»„</button>
    </form>

    {% if results %}
    <h4 class="mt-5">æ‰€æœ‰äººçš„æŠ•æ·ç»“æœ</h4>
    <table class="table table-bordered">
        <thead class="table-dark">
        <tr>
            <th>å§“å</th>
            <th>å¹³å‡å€¼</th>
            <th>æ‰€æœ‰æŠ•æ·å€¼</th>
        </tr>
        </thead>
        <tbody>
        {% for name, avg, rolls in results %}
        <tr>
            <td>{{ name }}</td>
            <td>{{ "%.2f" | format(avg) }}</td>
            <td>{{ rolls | join(", ") }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <h4 class="mt-4">åˆ†ç»„</h4>
    <ul class="list-group">
        {% for group in groups %}
        <li class="list-group-item">
            {{ group | map(attribute=0) | join(" & ") }}
        </li>
        {% endfor %}
    </ul>
    {% endif %}
    <h4 class="mt-4"></h4>
    <h4 class="mt-4"></h4>
</div>
</body>
</html>
